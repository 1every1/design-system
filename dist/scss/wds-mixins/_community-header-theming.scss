@import '../wds-functions/index';

@mixin community-header-theming(
	$header-background-color,
	$color-text,
	$color-links,
	$color-page,
	$color-page-border
) {

	// the same logic as $is-dark-wiki in oasis
	$is-dark-theme: lightness($color-page) < 50;

	$text-color: $wds-color-white;
	@if luminance($header-background-color) > 0.3 {
		$text-color: $wds-color-black;
	}
	$text-hover-color: rgba($text-color, 0.8);
	$text-hover-transition: color .2s;

	background-color: $header-background-color;

	&::before {
		background: linear-gradient(to right, rgba($header-background-color, 0.5), rgba($header-background-color, 0.5)), linear-gradient(to left, rgba($header-background-color, 0) 200px, $header-background-color 430px);
	}

	.wds-button.wds-is-secondary {
		background-color: rgba($header-background-color, 0.2);
		border-color: $text-color;
		color: $text-color;
		transition-property: border-color, background-color, color;
		transition-duration: .2s;

		a {
			color: $text-color;
		}

		svg {
			fill: $text-color;
		}
	}

	.wds-button.wds-is-secondary:hover {
		background-color: rgba($header-background-color, 0.4);
		border-color: $text-hover-color;
		color: $text-hover-color;

		svg {
			fill: $text-hover-color;
			transition: $text-hover-transition;
		}

		a {
			color: $text-hover-color;
			transition: $text-hover-transition;
		}
	}

	.wds-tabs__tab-label {
		color: $text-color;

		a {
			color: $text-color;
		}

		svg {
			fill: $text-color;
		}
	}

	.wds-tabs__tab.wds-is-active .wds-tabs__tab-label,
	.wds-tabs__tab:hover .wds-tabs__tab-label {
		color: $text-hover-color;
		transition: $text-hover-transition;

		a {
			color: $text-hover-color;
			transition: $text-hover-transition;
		}

		svg {
			fill: $text-hover-color;
			transition: $text-hover-transition;
		}
	}

	.wds-community-header__sitename a {
		color: $text-color;

		&:hover {
			color: $text-hover-color;
			transition: $text-hover-transition;
		}
	}

	.wds-community-header__counter {
		color: $text-color;
	}

	$dropdown-background-color: mix($color-page, #000, 90%);
	@if $is-dark-theme {
		$dropdown-background-color: mix($color-page, #fff, 90%);
	}

	.wds-dropdown__content {
		background-color: $dropdown-background-color;

		.wds-list.wds-is-linked li {
			> a {
				color: $color-text;
			}

			&:hover {
				> a {
					background-color: rgba($color-links, .1);
					color: $color-links;
				}
			}
		}

		.wds-list.wds-is-linked .wds-dropdown-level-2 .wds-dropdown-level-2__content {
			background-color: $dropdown-background-color;
			color: $color-text;
		}
	}

	.wds-dropdown::after {
		border-bottom-color: $dropdown-background-color;
	}

	.wds-dropdown::before {
		border-bottom-color: $color-page-border;
	}
}
